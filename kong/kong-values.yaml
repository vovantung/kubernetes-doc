
# kong-values.yaml
deployment:
  kong:
    enabled: true

  # T·∫Øt ingress controller v√¨ b·∫°n s·∫Ω c√†i ri√™ng
  ingressController:
    enabled: false

image:
  repository: kong/kong
  tag: "3.6"

fullnameOverride: kong

env:
  database: "postgres"
  pg_user: kong
  pg_password: kong
  pg_database: kong
  pg_host: kong-postgresql.kong.svc.cluster.local  # T√™n d·ªãch v·ª• PostgreSQL
  admin_gui_url: http://localhost:8002
  admin_gui_api_url: http://localhost:8001
  log_level: debug
  # b·∫≠t admin api cho KIC k·∫øt n·ªëi
  admin_listen: "0.0.0.0:8001, 0.0.0.0:8444 ssl"
  # b·∫≠t proxy
  proxy_listen: "0.0.0.0:8000, 0.0.0.0:8443 ssl"
  # database: "off"
  # plugins: bundled,role-checker
  # KONG_PLUGINS: "bundled,customplugins"  # üëà thay "customplugin" b·∫±ng t√™n plugin th·ª±c t·∫ø c·ªßa b·∫°n
  KONG_PLUGINS: bundled,customplugins
  KONG_LUA_PACKAGE_PATH: /opt/kong/customplugins/?.lua;;  # ƒê·∫£m b·∫£o plugin c√≥ th·ªÉ load

podOptions:
  dnsConfig:
    options:
      - name: ndots
        value: "1"

proxy:
  enabled: true
  type: NodePort   # Ho·∫∑c NodePort n·∫øu b·∫°n kh√¥ng c√≥ cloud LB (LoadBalancer)
  http:
    enabled: true
    servicePort: 80
  tls:
    enabled: false
    # servicePort: 443

  podAnnotations:
    nfs-mount: "true"

  extraVolumeMounts:
    - name: custom-plugins
      mountPath: /customplugins
  extraVolumes:
    - name: custom-plugins
      nfs:
        server: 192.168.98.150
        path: /mnt/data/nfs/plugins

admin:
  enabled: true
  type: ClusterIP # NodePort
  http:
    enabled: true
    servicePort: 8001
  tls:
    enabled: false
    # servicePort: 8444

postgresql:
  enabled: true
  auth:
    username: kong
    password: kong
    database: kong
  primary:
    persistence:
      storageClass: nfs-client
      size: 1Gi

ingressController:
  enabled: false  # r·∫•t quan tr·ªçng, b·∫°n s·∫Ω c√†i ri√™ng KIC

# b·∫≠t migration init v√† wait
migrations:
  preUpgrade: true
  postUpgrade: true
  annotations: {}
